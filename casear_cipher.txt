import java.util.*;

class Main {
    public static String encode(String enc, int key) {
        key = key % 26 + 26; // Normalize key
        StringBuilder encoded = new StringBuilder();
        for (char i : enc.toCharArray()) {
            if (Character.isLetter(i)) {
                if (Character.isUpperCase(i)) {
                    encoded.append((char) ('A' + (i - 'A' + key) % 26));
                } else {
                    encoded.append((char) ('a' + (i - 'a' + key) % 26));
                }
            } else {
                encoded.append(i); // Keep non-letters unchanged
            }
        }
        return encoded.toString();
    }

    public static String decode(String enc, int key) {
        return encode(enc, 26 - key); // Reverse the shift
    }

    public static void main(String[] args) {
        Scanner sc = new Scanner(System.in);

        System.out.print("Enter the plain text: ");
        String msg = sc.nextLine();

        int key = -1;
        while (key < 0) {
            System.out.print("Enter the key (positive integer): ");
            if (sc.hasNextInt()) {
                key = sc.nextInt();
                if (key < 0) {
                    System.out.println("Key must be a non-negative integer.");
                }
            } else {
                System.out.println("Invalid input! Please enter a number.");
                sc.next(); // clear invalid input
            }
        }

        System.out.println("\nSimulating Caesar Cipher\n-------------------");
        System.out.println("Input : " + msg);
        String encrypted = Main.encode(msg, key);
        System.out.println("Encrypted Message : " + encrypted);
        System.out.println("Decrypted Message : " + Main.decode(encrypted, key));
    }
}
